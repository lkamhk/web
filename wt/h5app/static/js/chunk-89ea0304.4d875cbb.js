(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89ea0304"],{"0793":function(t,e,s){},"1d20":function(t,e,s){"use strict";s("6dfc")},6929:function(t,e,s){"use strict";s("0793")},"6ca1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Site IndexBox"},[e("div",{staticClass:"ScrollBox wrapper"},[e("div",{staticClass:"full-bg-img"}),e("Header"),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]},[e("van-overlay",{attrs:{show:!0}},[e("div",{staticClass:"loading-wrapper"},[e("van-loading",{staticClass:"loading",attrs:{type:"spinner",size:"50px",color:"#fff",vertical:""}})],1)])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}]},[e("div",{staticClass:"btn-row flex flex-center relative"},[e("div",{staticClass:"btn-box"},[e("div",{class:{btn:!0,"btn-selected":!t.contentToggle},attrs:{id:"channelBtn"}},[t._v(" 渠道统计 ")])])]),e("div",[e("div",{staticClass:"pie-chart-row"},[e("div",{ref:"pieChart",staticClass:"pie-chart",attrs:{id:"chart-container"}})]),e("div",{staticClass:"bnl-chart-row"},[e("div",{staticClass:"info-row"},[e("div",{staticClass:"info-col"},[e("div",{staticClass:"info-col-top"},[e("span",[t._v("成功金额")]),e("span",{staticClass:"precentIcon"},[t._v(t._s(t.channelData.list[t.selectedCh].successCmp>=0?"+"+this.channelData.list[this.selectedCh].successCmp:""+this.channelData.list[this.selectedCh].successCmp)+" %")])]),e("div",{staticClass:"info-col-btm"},[t._v(" ₹ "+t._s(t.channelData.list[t.selectedCh].successAmount)+" ")])]),e("div",{staticClass:"info-col tocenter"},[e("div",{staticClass:"info-col-top"},[e("span",[t._v("总金额")]),e("span",{staticClass:"precentIcon"},[t._v(" "+t._s(t.channelData.list[t.selectedCh].amountCmp>=0?"+"+this.channelData.list[this.selectedCh].amountCmp:""+this.channelData.list[this.selectedCh].amountCmp)+" %")])]),e("div",{staticClass:"info-col-btm"},[t._v(" ₹ "+t._s(t.channelData.list[t.selectedCh].amountTotal)+" ")])]),e("div",{staticClass:"info-col"},[e("div",{staticClass:"info-col-top"},[e("span",[t._v("订单总数")]),e("span",{staticClass:"precentIcon"},[t._v(" "+t._s(t.channelData.list[t.selectedCh].ordersCmp>=0?"+"+this.channelData.list[this.selectedCh].ordersCmp:""+this.channelData.list[this.selectedCh].ordersCmp)+" %")])]),e("div",{staticClass:"info-col-btm"},[t._v(" "+t._s(t.channelData.list[t.selectedCh].ordersNum)+" 单 ")])])]),e("div",{staticClass:"br-div"}),e("div",{staticClass:"bnl-dropmenu"},[e("div",{staticClass:"bnl-chart-unit ="},[t._v("单位:件")]),e("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.openChannelList,callback:function(e){t.openChannelList=e},expression:"openChannelList"}},[e("div",{staticClass:"channel-picker"},[e("van-picker",{attrs:{title:"标题","show-toolbar":"",columns:t.ChannelList},on:{confirm:t.onConfirmCh,cancel:function(e){t.openChannelList=!1}}})],1)]),e("div",{staticClass:"channel-list-p-wrp",on:{click:function(e){t.openChannelList=!0}}},[e("p",{staticClass:"channel-list-p"},[t._v(" "+t._s(t.ChannelList[t.selectedCh].text)+" ")]),e("van-icon",{attrs:{name:"arrow-down",color:"rgba(255,255,255,0.2)"}})],1)],1),e("div",{ref:"bnlChart",staticClass:"bnl-chart",on:{touchstart:t.handleDragToChChannelStart,touchmove:t.handleDragToChChannel,touchend:function(e){t.isSwiping=!1}}})])])]),e("BottomNav")],1)])},n=[],i=s("313e"),l=(s("c1df"),s("7f45")),o=s.n(l),c={name:"StatisticsCh",components:{},props:[],data(){return{isLoading:!1,openChannelList:!1,selectedCh:0,isSwiping:!1,touchStartX:0,deltaX:0,ChannelList:[{text:"test",value:1}],chartInstance:"",channelData:{id:"656fe5cdfbb9c918f8a65a9e",dataTime:999999,list:[{channelNo:"test",channelName:"string",successAmount:99990,successCmp:57,amountTotal:999990,amountCmp:90,ordersNum:999990,ordersCmp:73,rateArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],numArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],successArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]},{channelNo:"test123",channelName:"string123",successAmount:9999,successCmp:23,amountTotal:88888,amountCmp:46,ordersNum:9999,ordersCmp:66,rateArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],numArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],successArr:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}],pieArr:[{channel:"string",num:10},{channel:"string123",num:90}],userNo:"88888888",requestNo:"1234",created:"2023-12-06T11:09:01.334"},contentToggle:!1,chartVisible:!0,chTimer:null,pieOptions:{title:{text:"渠道占比",bottom:10,left:"25%",textStyle:{color:"#d3d7d6",fontSize:"14px"}},color:["#1475de","#1bae29","#9702fe","#ff6d00","#2bc8f3"],legend:{type:"scroll",orient:"vertical",align:"left",left:"50%",top:"10%",bottom:"1%",icon:"circle",itemWidth:10,itemHeight:10,itemGap:20,pageTextStyle:{color:"#fff"},textStyle:{color:"#fff",fontSize:"13px"},formatter:t=>{let e=0;for(let s=0;s<this.pieOptions.series.length;s++){let a=this.pieOptions.series[s].data;for(let s=0;s<a.length;s++)if(a[s].name===t){e+=a[s].value;break}}return`${t}\n\n${e}`}},series:[{name:"Access From",type:"pie",radius:["33%","50%"],left:"0%",right:"45%",label:{show:!1,formatter:"{c}"},emphasis:{scale:!1,scaleSize:1,label:{show:!0,formatter:"{c}"}},labelLine:{show:!0},data:[],itemStyle:{}}]},bnlOptions:{grid:{top:"10%",right:"13%",bottom:"20%"},xAxis:{type:"category",data:[],axisLabel:{interval:1,show:!0},axisLine:{show:!0,lineStyle:{color:"#fbffff"}}},yAxis:[{type:"value",axisLine:{show:!0,lineStyle:{color:"#fbffff"}}},{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],textStyle:{color:"white"},series:[{name:"订单",type:"bar",data:[30,60,90,120,150,120,30,80,90,100],itemStyle:{color:new i["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"#00bef9"},{offset:.25,color:"#0076ea"},{offset:.5,color:"#035fc2"},{offset:1,color:"#0f336f"}])}},{name:"成功订单",type:"bar",data:[100,200,150,250,300,200,150,250,200,150],itemStyle:{color:new i["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"#73f020"},{offset:.01,color:"#12b028"},{offset:.5,color:"#4ace69"},{offset:1,color:"#57c981"}])}},{name:"成功率",type:"line",yAxisIndex:1,symbol:"none",smooth:!0,showSymbol:!1,lineStyle:{color:"#F77A67"},itemStyle:{color:"#F77A67"},data:[20,15,25,10,30,5,20,15,16,12]}],legend:[{itemWidth:40,itemHeight:2,bottom:5,left:"center",data:[{name:"订单",textStyle:{color:"#035fc2"}},{name:"成功订单",textStyle:{color:"#4ace69"}},{name:"成功率",textStyle:{color:"#F77A67"}}]}]}}},computed:{},watch:{},created(){this.isLoading=!0,this.selectedCh=0;new i["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"#00bef9"},{offset:.25,color:"#0076ea"},{offset:.5,color:"#035fc2"},{offset:1,color:"#0f336f"}]),new i["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"#fe8e80"},{offset:.25,color:"#ff7e6a"},{offset:.5,color:"#f56c59"},{offset:1,color:"#ec5f44"}]),new i["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"#73f020"},{offset:.01,color:"#12b028"},{offset:.5,color:"#4ace69"},{offset:1,color:"#57c981"}])},mounted(){this.initBnlChart(),this.getChannelData()},activated(){},destroyed(){clearInterval(this.chTimer)},beforeDestroy(){},methods:{get10minNow(t){this.bnlOptions.xAxis.data=this.generateTimeArray(t)},generateTimeArray(t){t=t-72e5-18e5;var e=o()(t).utcOffset("+05:30").toDate();let s=e.getHours(),a=e.getMinutes(),n=[];for(let i=0;i<10;i++){let t=a-9+i,e=s;t<0&&(t+=60,e-=1,e<0&&(e+=24));const l=e.toString().padStart(2,"0"),o=t<10?"0"+t:t.toString(),c=`${l}:${o}`;n.push(c)}return n},handleDragToChChannelStart(t){t.preventDefault(),this.isSwiping||(this.touchStartX=t.touches[0].clientX)},handleDragToChChannel(t){if(t.preventDefault(),this.isSwiping)return;this.isSwiping=!0;let e=this.ChannelList.length-1,s=this.selectedCh===e?0:this.selectedCh+1;this.deltaX=t.touches[0].clientX-this.touchStartX,Math.abs(this.deltaX)>5&&(this.bnlOptions.series[0].data=this.channelData.list[s].numArr,this.bnlOptions.series[1].data=this.channelData.list[s].successArr,this.bnlOptions.series[2].data=this.channelData.list[s].rateArr,this.get10minNow(this.channelData.dataTime),this.bnlChartInstance.setOption(this.bnlOptions),this.selectedCh=s)},handleChangeChannels(t){this.bnlOptions.series[0].data=this.channelData.list[t].numArr,this.bnlOptions.series[1].data=this.channelData.list[t].successArr,this.bnlOptions.series[2].data=this.channelData.list[t].rateArr,this.get10minNow(this.channelData.dataTime),this.bnlChartInstance.setOption(this.bnlOptions)},initBnlChart(){this.bnlChartInstance=i["init"](this.$refs.bnlChart),this.bnlChartInstance.setOption(this.bnlOptions)},contentToggleFn(){clearInterval(this.chTimer),this.chartInstance&&this.chartInstance.dispose(),this.getChannelData(),this.initBnlChart(),this.chTimer=setInterval(()=>{let t=(new Date).getSeconds();0===t&&this.getChannelData()},1e3)},onConfirmMc(t,e){this.selectedMc=e,this.handleChangeMerchant(e),this.openMerchantList=!1},onChangeMc(t,e){},onChangeCh(t,e){},onConfirmCh(t,e){this.selectedCh=e,this.handleChangeChannels(e),this.openChannelList=!1},getChannelData(){this.$Model.getChannel(t=>{200==t.code?(this.isLoading=!1,this.channelData=t.data,this.ChannelList=this.channelData.list.map(t=>{let e={};return e["text"]=t.channelName,e["value"]=t.channelNo,e}),this.bnlOptions.series[0].data=this.channelData.list[this.selectedCh].successArr,this.bnlOptions.series[1].data=this.channelData.list[this.selectedCh].numArr,this.bnlOptions.series[2].data=this.channelData.list[this.selectedCh].rateArr,this.handleChangeChannels(this.selectedCh),this.get10minNow(this.channelData.dataTime),this.pieChartInstance&&this.pieChartInstance.dispose(),this.channelData&&this.channelData.pieArr&&(this.channelData.pieOption=this.channelData.pieArr.map(t=>{let e={};return e["name"]=t.channel,e["value"]=t.num,e})),this.pieChartInstance=i["init"](this.$refs.pieChart),this.pieOptions.series[0].data=this.channelData.pieOption,this.pieChartInstance.setOption(this.pieOptions)):this.$Dialog.Toast(t.msg)})}}},h=c,r=(s("6929"),s("1d20"),s("2877")),d=Object(r["a"])(h,a,n,!1,null,"7476ea5f",null);e["default"]=d.exports},"6dfc":function(t,e,s){}}]);